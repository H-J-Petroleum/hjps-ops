{
  "objects": {
    "deal": {
      "hj_customer_id": "Copied from associated customer company during WF-03 validation.",
      "hj_operator_id": "Copied from associated operator company during WF-03 validation.",
      "assign_consultant_to_a_new_sales_deal": "Consultant assignment URL generated by WF-01.",
      "link_for_consultant": "Encrypted consultant portal link generated by WF-01.",
      "create_associate_well": "CMS link for well creation surfaced after WF-03 passes.",
      "scope_of_work_and_pricing": "Scope creation button generated during WF-01 (Action 3).",
      "missing_important_info": "Validation flag; must be \"No\" before project creation runs.",
      "deal_error_note_id": "Reference to HubSpot note describing why validation failed."
    },
    "company": {
      "msa_terms": "Customer terms pulled into the deal and copied to the project."
    },
    "hj_projects": {
      "hj_project_name": "Created from the sales deal name.",
      "hj_approver_email": "Filled when WF-03 validates the approver contact.",
      "hj_customer": "Customer name copied from the associated company.",
      "hj_operator": "Operator name copied from the associated company.",
      "hj_sales_deal_owner_name": "Deal owner name stored for escalation to approvals/billing.",
      "hj_taxable": "Project-level tax flag consumed by billing.",
      "hj_project_id": "Unique project identifier created during project creation flow."
    }
  },
  "validation_rules": [
    "Customer, operator, primary contact, approver, and deal owner associations must exist before WF-03 finishes.",
    "Company `msa_terms` cannot be blank before project creation.",
    "`missing_important_info` must resolve to No before triggering project creation."
  ],
  "data_flow": {
    "WF-01": "Adds consultant metadata and URLs to the recruiting deal; mirrored on the sales deal.",
    "WF-03": "Copies customer/operator data, validates associations, sets project-ready fields on the sales deal.",
    "Project Creation Workflow": "Reads validated deal fields and writes them onto the `hj_projects` object."
  },
  "last_updated": "2025-09-18",
  "url_mappings": {
    "assign_consultant_to_a_new_sales_deal": {
      "expected_format": "https://app.hubspot.com/l/consultant-assignment?dealId={deal_id}&consultantId={consultant_vid}",
      "source": "WF-01",
      "consumers": [
        "Consultant assignment CMS modules"
      ],
      "notes": "Regenerate via WF-01 whenever recruiting stages or consultant IDs change."
    },
    "link_for_consultant": {
      "expected_format": "https://portal.hjpetroleum.com/timesheets/{token}",
      "source": "WF-01",
      "consumers": [
        "Consultant portal",
        "Approval notifications"
      ],
      "notes": "Token encodes project + consultant; invalidate if consultant is reassigned."
    },
    "create_associate_well": {
      "expected_format": "https://portal.hjpetroleum.com/wells/new?dealId={deal_id}",
      "source": "WF-03",
      "consumers": [
        "Well creation CMS flow",
        "Company association workflows"
      ],
      "notes": "Update workflow action when CMS route changes; see known issues entry."
    }
  }
}
