{
  "objects": {
    "deal": {
      "assign_consultant_to_a_new_sales_deal": "HTML link that launches the consultant/approver intake modules; generated by WF-01.",
      "link_for_consultant": "Encrypted consultant portal URL; downstream approvals depend on this value.",
      "missing_important_info": "Flag set by WF-03 when required associations (approver, primary, operator, customer) are missing or conflicting.",
      "deal_error_note_id": "HubSpot note ID written by WF-03 with remediation details when validation fails."
    },
    "contact": {
      "email": "Approver email address used for future notification workflows.",
      "firstname": "Approver first name displayed in workflow-generated communications.",
      "lastname": "Approver last name displayed in workflow-generated communications."
    },
    "hj_projects": {
      "hj_approver_email": "Copied from the approver contact once WF-03 validation passes.",
      "hj_approver_is": "Dropdown indicating approver type (internal vs customer).",
      "hj_approver_name": "Concatenated name written during project creation; used by approval dashboards."
    }
  },
  "validation_rules": [
    "Approver contact must be present and labelled Approver before WF-03 completes.",
    "Approver contact ID must not match consultant association (type 4) or the primary contact ID.",
    "missing_important_info must be reset to No before project creation is triggered."
  ],
  "data_flow": {
    "WF-01": "Populates consultant metadata and assignment URLs on the deal.",
    "WF-03": "Validates approver association, updates deal fields, copies approver properties to the project object.",
    "WF-06": "Creates consultant association ensuring conflict checks have the required inputs."
  },
  "last_updated": "2025-09-18",
  "url_mappings": {
    "assign_consultant_to_a_new_sales_deal": {
      "expected_format": "https://app.hubspot.com/l/consultant-assignment?dealId={deal_id}&consultantId={consultant_vid}",
      "source": "WF-01",
      "consumers": [
        "Consultant assignment modules"
      ],
      "notes": "Regenerate via WF-01 when consultant or recruiting stages change."
    },
    "link_for_consultant": {
      "expected_format": "https://portal.hjpetroleum.com/timesheets/{token}",
      "source": "WF-01",
      "consumers": [
        "Consultant portal",
        "Approval notifications"
      ],
      "notes": "Token invalid after consultant reassignment; rerun WF-01."
    },
    "create_associate_well": {
      "expected_format": "https://portal.hjpetroleum.com/well-creation?dealId={deal_id}",
      "source": "WF-03",
      "consumers": [
        "Company association workflows"
      ],
      "notes": "Update when CMS route changes; monitor known issue #3."
    }
  }
}
